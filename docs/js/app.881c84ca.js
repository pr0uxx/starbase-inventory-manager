(function(e){function t(t){for(var a,l,c=t[0],i=t[1],u=t[2],s=0,d=[];s<c.length;s++)l=c[s],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&d.push(o[l][0]),o[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);b&&b(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==o[i]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},r=[];function l(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"31293421"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=a);var r,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=l(e);var u=new Error;r=function(t){i.onerror=i.onload=null,clearTimeout(s);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",u.name="ChunkLoadError",u.type=a,u.request=r,n[1](u)}o[e]=void 0}};var s=setTimeout((function(){r({type:"timeout",target:i})}),12e4);i.onerror=i.onload=r,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/starbase-inventory-manager/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var b=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},3054:function(e,t,n){"use strict";n("f7bc")},3302:function(e,t,n){},6500:function(e,t,n){"use strict";n("3302")},"8b8a":function(e,t){e.exports="data:image/png;base64,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"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function o(e,t){var n=Object(a["z"])("router-view");return Object(a["s"])(),Object(a["d"])(n)}n("6500");const r={};r.render=o;var l=r,c=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02"));Object(a["v"])("data-v-1092a1f2");var i={class:"home container-fluid"},u={class:"d-flex flex-wrap"},s={class:"col-12 col-md-6 col-lg-4"},b={class:"card  me-2",id:"pi-card"},d=Object(a["g"])("div",{class:"card-header"}," Player Inventory ",-1),O={class:"col-12 col-md-6 col-lg-4"},f={class:"card me-2",id:"s-card"},m=Object(a["g"])("div",{class:"card-header"}," Ship ",-1),j={class:"col-12 col-md-12 col-lg-4"},h={class:"card me-2",id:"c-card"},g=Object(a["g"])("div",{class:"card-header"}," Remaining ",-1),v=Object(a["g"])("ul",{class:"nav nav-tabs mt-4",id:"myTab",role:"tablist"},[Object(a["g"])("li",{class:"nav-item",role:"presentation"},[Object(a["g"])("button",{class:"nav-link active",id:"market-tab","data-bs-toggle":"tab","data-bs-target":"#market",type:"button",role:"tab","aria-controls":"market","aria-selected":"true"},"Edit Market Values")])],-1),p={class:"tab-content",id:"myTabContent"},y={class:"tab-pane fade show active",id:"market",role:"tabpanel","aria-labelledby":"market-tab"},A={class:"container-fluid"},k={class:"col-12"};function w(e,t,n,o,r,l){var c=Object(a["z"])("OreTable"),w=Object(a["z"])("ShipPurchase"),S=Object(a["z"])("InventoryCompare"),V=Object(a["z"])("MarketComponent");return Object(a["s"])(),Object(a["f"])("div",i,[Object(a["g"])("p",null,"Prices last updated: "+Object(a["B"])(e.market.lastUpdate),1),Object(a["g"])("div",u,[Object(a["g"])("div",s,[Object(a["g"])("div",b,[d,Object(a["i"])(c,{inventory:e.playerInventory},null,8,["inventory"])])]),Object(a["g"])("div",O,[Object(a["g"])("div",f,[m,Object(a["i"])(w,{inventory:e.shipInventory},null,8,["inventory"])])]),Object(a["g"])("div",j,[Object(a["g"])("div",h,[g,Object(a["i"])(S,{inventoryA:e.playerInventory,inventoryB:e.shipInventory},null,8,["inventoryA","inventoryB"])])])]),v,Object(a["g"])("div",p,[Object(a["g"])("div",y,[Object(a["g"])("div",A,[Object(a["g"])("div",k,[Object(a["i"])(V,{class:"p-2",onUpdateOres:t[0]||(t[0]=function(t){return e.updateOreValues()})})])])])])])}Object(a["t"])();n("b0c0");var S=n("8b8a"),V=n.n(S),I={class:"container-fluid inventory-card"},N={class:"form-floating m-2"},x=Object(a["g"])("label",{for:"floatingInput"},"Player Cash Balance",-1),B={class:"row m-2 mt-3"},T={class:"card "},C={class:"d-flex justify-content-between w-100"},M=Object(a["g"])("span",null,"Inventory total ore: ",-1),U={class:"d-flex justify-content-between w-100"},E=Object(a["g"])("span",null,"Inventory total ore stacks: ",-1),L={class:"d-flex justify-content-between w-100"},R=Object(a["g"])("span",null,"Inventory total value:",-1),F=Object(a["g"])("img",{src:V.a},null,-1),D={class:"row m-1"},G={class:"col-12 d-flex align-items-center justify-content-end"},P={class:"btn-group mt-2"},W={class:"table-responsive"},Z={class:"table table-sm table-striped w-100"},z=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",null,"Name"),Object(a["g"])("th",null,"Value"),Object(a["g"])("th",null,"Stacks"),Object(a["g"])("th",null,"Extra Volume"),Object(a["g"])("th",null,"Total Ore"),Object(a["g"])("th",null,[Object(a["h"])("Total "),Object(a["g"])("img",{src:V.a})])])],-1),Y={width:"15%"},H=["onUpdate:modelValue"],J=["onUpdate:modelValue"];function K(e,t,n,o,r,l){return Object(a["s"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("div",I,[Object(a["g"])("div",N,[Object(a["G"])(Object(a["g"])("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.playerInventory.cash=t}),class:"form-control",id:"floatingInput"},null,512),[[a["E"],e.playerInventory.cash]]),x]),Object(a["g"])("div",B,[Object(a["g"])("div",T,[Object(a["g"])("p",C,[M,Object(a["g"])("span",null,Object(a["B"])(e.formatNumber(e.playerInventory.totalOreVolume)),1)]),Object(a["g"])("p",U,[E,Object(a["g"])("span",null,Object(a["B"])(e.formatNumber(e.playerInventory.totalOreStacks)),1)]),Object(a["g"])("p",L,[R,Object(a["g"])("span",null,[Object(a["h"])(Object(a["B"])(e.formatNumber(e.playerInventory.totalOreValue))+" ",1),F])])])]),Object(a["g"])("div",D,[Object(a["g"])("div",G,[Object(a["g"])("div",P,[Object(a["g"])("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=function(t){return e.savePlayerInventory()})},"Save"),Object(a["g"])("button",{class:"btn btn-secondary",onClick:t[2]||(t[2]=function(t){return e.getPlayerInventory()})},"Load Inventory Data")])])])]),Object(a["g"])("div",W,[Object(a["g"])("table",Z,[z,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["f"])(a["a"],null,Object(a["y"])(e.playerInventory.ores,(function(t){return Object(a["s"])(),Object(a["f"])("tr",{class:"align-middle",key:t},[Object(a["g"])("td",null,Object(a["B"])(t.name),1),Object(a["g"])("td",null,Object(a["B"])(t.marketValue),1),Object(a["g"])("td",Y,[Object(a["G"])(Object(a["g"])("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":function(e){return t.fullStackCount=e}},null,8,H),[[a["E"],t.fullStackCount]])]),Object(a["g"])("td",null,[Object(a["G"])(Object(a["g"])("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":function(e){return t.nonFullStackTotalVolume=e}},null,8,J),[[a["E"],t.nonFullStackTotalVolume]])]),Object(a["g"])("td",null,Object(a["B"])(e.formatNumber(t.totalOre)),1),Object(a["g"])("td",null,Object(a["B"])(e.formatNumber(t.totalMarketValue)),1)])})),128))])])])],64)}var Q=n("b85c"),q=(n("7db0"),n("262e")),X=n("2caf"),$=n("d4ec"),_=n("bee2"),ee=(n("d81d"),n("159b"),n("a9e3"),n("b680"),n("25f0"),n("ac1f"),n("1276"),function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object($["a"])(this,e),this.stackSize=1728e3,this.name=t,this.marketValue=n}),te=function e(t,n){Object($["a"])(this,e),this.oreArray=t,this.date=n},ne=function e(){Object($["a"])(this,e)};ne.lastUpdate=new Date(2021,7,26),ne.ores=[new ee("Aegisium",6440),new ee("Ajatite",549),new ee("Arkanium",12780),new ee("Bastium",2050),new ee("Charodium",4449),new ee("Corazium",21649),new ee("Exorium",4644),new ee("Ice",817),new ee("Karnite",9900),new ee("Kutonium",18935),new ee("Lukium",20500),new ee("Nhurgite",3099),new ee("Surtrite",4090),new ee("Valkite",545),new ee("Vokarium",2040),new ee("Ymrium",28399)],ne.oreHistory=[new te([new ee("Aegisium",7750),new ee("Ajatite",548),new ee("Arkanium",12895),new ee("Bastium",2495),new ee("Charodium",4398),new ee("Corazium",28895),new ee("Exorium",7089),new ee("Ice",817),new ee("Karnite",4749),new ee("Kutonium",22950),new ee("Lukium",24e3),new ee("Nhurgite",3340),new ee("Surtrite",3850),new ee("Valkite",543),new ee("Vokarium",2100),new ee("Ymrium",31270)],new Date(2021,7,23))];var ae=function(){function e(){Object($["a"])(this,e),this.tick=0,this.createdDate=new Date(Date.now()),this.ores=ne.ores.map((function(e){return new oe(e.name,e.marketValue)})),this.cash=0,this.updateOres()}return Object(_["a"])(e,[{key:"updateOres",value:function(){this.ores.forEach((function(e){var t=ne.ores.find((function(t){return t.name===e.name}));t&&(e.marketValue=t.marketValue)}))}},{key:"totalOreVolume",get:function(){return this.getTotalOreVolume()}},{key:"getTotalOreVolume",value:function(){var e=this.sum(this.ores.map((function(e){if(e.totalOre&&e.totalOre>0)return e.totalOre;var t,n,a=e.fullStackCount*e.stackSize+e.nonFullStackTotalVolume,o=null!==(t=Number(a))&&void 0!==t?t:0;return Number(null!==(n=o.toFixed(0))&&void 0!==n?n:0)})));return e}},{key:"totalOreValue",get:function(){return this.getTotalOreValue()}},{key:"getTotalOreValue",value:function(){return this.sum(this.ores.map((function(e){if(e.totalMarketValue&&e.totalMarketValue>0)return e.totalMarketValue;var t,n,a=e.fullStackCount*e.stackSize+e.nonFullStackTotalVolume,o=a/e.stackSize*e.marketValue,r=null!==(t=Number(o))&&void 0!==t?t:0;return Number(null!==(n=r.toFixed(0))&&void 0!==n?n:0)})))}},{key:"totalOreStacks",get:function(){var e=this.totalOreVolume/this.ores[0].stackSize;return null!==e&&void 0!==e?e:0}},{key:"sum",value:function(e){return e.reduce((function(e,t){return e+t}))}}]),e}(),oe=function(e){Object(q["a"])(n,e);var t=Object(X["a"])(n);function n(e){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object($["a"])(this,n),a=t.call(this,e,o),a.fullStackCount=0,a.nonFullStackTotalVolume=0,a._totalOre=0,a}return Object(_["a"])(n,[{key:"totalOre",get:function(){return this.getTotalOre()}},{key:"getTotalOre",value:function(){return this._totalOre=this.fullStackCount*this.stackSize+this.nonFullStackTotalVolume,this._totalOre}},{key:"totalMarketValue",get:function(){return this.getTotalMarketValue()}},{key:"getTotalMarketValue",value:function(){return this.totalOre/this.stackSize*this.marketValue}}]),n}(ee),re=function(){function e(t,n){Object($["a"])(this,e),this.inventoryA=t,this.inventoryB=n}return Object(_["a"])(e,[{key:"totalOreValue",get:function(){return this.inventoryA.totalOreValue-this.inventoryB.totalOreValue}},{key:"totalOreVolume",get:function(){return this.inventoryA.totalOreVolume-this.inventoryB.totalOreVolume}},{key:"totalOreStacks",get:function(){return this.inventoryA.totalOreStacks-this.inventoryB.totalOreStacks}},{key:"oreArray",get:function(){var e=this;return this.inventoryA.ores.map((function(t,n){var a=new oe(t.name,t.marketValue),o=e.inventoryB.ores[n],r=t.totalOre-o.totalOre,l=(r/t.stackSize).toString(),c=l.split(".");return a.fullStackCount=Number(c[0]),a.nonFullStackTotalVolume=c[1]?Number("0.".concat(c[1]))*t.stackSize:0,a}))}},{key:"cash",get:function(){return this.inventoryA.cash-this.inventoryB.cash}}]),e}(),le=function e(t){Object($["a"])(this,e),this.data=JSON.stringify(t)},ce=Object(a["j"])({name:"OreTable",data:function(){var e;return{playerInventory:null!==(e=this.inventory)&&void 0!==e?e:new ae}},props:{inventory:Object},methods:{formatNumber:function(e){return this.$stringHelper.formatNumber(e)},getPlayerInventory:function(){var e=this,t=this.$dbContext,n=t.getStore("PlayerInventory","readonly");if(n){var a=n.count(void 0);a.onsuccess=function(a){var o=1;t.getStoredObjectByIndex(n,o).then((function(t){if(t){var n,a,o=JSON.parse(t.data),r=Object(Q["a"])(e.playerInventory.ores);try{var l=function(){var e,t,n=a.value,r=o.ores.find((function(e){return e.name===n.name}));n.fullStackCount=null!==(e=null===r||void 0===r?void 0:r.fullStackCount)&&void 0!==e?e:n.fullStackCount,n.nonFullStackTotalVolume=null!==(t=null===r||void 0===r?void 0:r.nonFullStackTotalVolume)&&void 0!==t?t:n.nonFullStackTotalVolume};for(r.s();!(a=r.n()).done;)l()}catch(c){r.e(c)}finally{r.f()}e.playerInventory.cash=null!==(n=null===o||void 0===o?void 0:o.cash)&&void 0!==n?n:e.playerInventory.cash}}))},a.onerror=function(e){console.error("count error",e)}}else console.error("unable to get store")},savePlayerInventory:function(){var e=this,t=this.$dbContext,n=t.getStore("PlayerInventory","readwrite");if(n){var a=n.count();a.onsuccess=function(t){var o=new le(e.playerInventory);if(0===a.result){var r=n.add(o);r.onsuccess=function(e){console.log("saved player inventory!")},r.onerror=function(e){console.error("error saving player inventory",e)}}else n.put(o,1)}}else console.error("unable to get store")}}});ce.render=K;var ie=ce,ue={class:"inventory-card"},se={class:"container-fluid"},be={class:"form-floating m-2"},de=Object(a["g"])("label",{for:"floatingInput"},"Ship Price",-1),Oe={key:0,class:"container-fluid"},fe={class:"row"},me={class:"col-6"},je={class:"form-floating m-2"},he=Object(a["g"])("label",{for:"floatingInput"},"Ship Name",-1),ge={class:"col-6 d-flex align-items-center justify-content-center"},ve={class:"btn-group"},pe={class:"container-fluid"},ye={key:0,class:"d-flex w-100"},Ae=Object(a["g"])("option",{disabled:"",value:""},"Please select one",-1),ke={class:"container-fluid"},we={class:"card m-2 px-2"},Se={class:"d-flex justify-content-between w-100"},Ve=Object(a["g"])("span",null,"Ship total ore cost: ",-1),Ie={class:"d-flex justify-content-between w-100"},Ne=Object(a["g"])("span",null,"Ship total ore stacks:",-1),xe={class:"d-flex justify-content-between w-100"},Be=Object(a["g"])("span",null,"Ship total ore value: ",-1),Te=Object(a["g"])("img",{src:V.a},null,-1),Ce={class:"table-responsive"},Me={class:"table table-sm table-striped w-100"},Ue=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",null,"Name"),Object(a["g"])("th",null,"Stacks"),Object(a["g"])("th",null,"Extra Volume"),Object(a["g"])("th",null,"Total Ore"),Object(a["g"])("th",null,[Object(a["h"])("Total "),Object(a["g"])("img",{src:V.a})])])],-1),Ee={width:"15%"},Le=["onUpdate:modelValue"],Re=["onUpdate:modelValue"];function Fe(e,t,n,o,r,l){return Object(a["s"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("div",ue,[Object(a["g"])("div",se,[Object(a["g"])("div",be,[Object(a["G"])(Object(a["g"])("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.shipInventory.cash=t}),class:"form-control",id:"floatingInput"},null,512),[[a["E"],e.shipInventory.cash]]),de])]),e.showLoadDialog?Object(a["e"])("",!0):(Object(a["s"])(),Object(a["f"])("div",Oe,[Object(a["g"])("div",fe,[Object(a["g"])("div",me,[Object(a["g"])("div",je,[Object(a["G"])(Object(a["g"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.shipName=t}),class:"form-control",id:"floatingInput"},null,512),[[a["E"],e.shipName]]),he])]),Object(a["g"])("div",ge,[Object(a["g"])("div",ve,[Object(a["g"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.saveShip()})},"Save Ship"),Object(a["g"])("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=function(t){return e.showLoadShipDialog()})},"Load Ship")])])])])),Object(a["g"])("div",pe,[e.showLoadDialog?(Object(a["s"])(),Object(a["f"])("div",ye,[Object(a["G"])(Object(a["g"])("select",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.shipToLoad=t}),class:"form-select m-2",onChange:t[5]||(t[5]=function(t){return e.loadShip(e.shipToLoad)})},[Ae,(Object(a["s"])(!0),Object(a["f"])(a["a"],null,Object(a["y"])(e.shipNameArray,(function(e){return Object(a["s"])(),Object(a["f"])("option",{key:e},Object(a["B"])(e),1)})),128))],544),[[a["D"],e.shipToLoad]])])):Object(a["e"])("",!0)]),Object(a["g"])("div",ke,[Object(a["g"])("div",we,[Object(a["g"])("p",Se,[Ve,Object(a["g"])("span",null,Object(a["B"])(e.formatNumber(e.shipInventory.totalOreVolume)),1)]),Object(a["g"])("p",Ie,[Ne,Object(a["g"])("span",null,Object(a["B"])(e.formatNumber(e.shipInventory.totalOreStacks)),1)]),Object(a["g"])("p",xe,[Be,Object(a["g"])("span",null,[Object(a["h"])(Object(a["B"])(e.formatNumber(e.shipInventory.totalOreValue)),1),Te])])])])]),Object(a["g"])("div",Ce,[Object(a["g"])("table",Me,[Ue,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["f"])(a["a"],null,Object(a["y"])(e.shipInventory.ores,(function(t){return Object(a["s"])(),Object(a["f"])("tr",{class:"align-middle",key:t},[Object(a["g"])("td",null,Object(a["B"])(t.name),1),Object(a["g"])("td",Ee,[Object(a["G"])(Object(a["g"])("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":function(e){return t.fullStackCount=e}},null,8,Le),[[a["E"],t.fullStackCount]])]),Object(a["g"])("td",null,[Object(a["G"])(Object(a["g"])("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":function(e){return t.nonFullStackTotalVolume=e}},null,8,Re),[[a["E"],t.nonFullStackTotalVolume]])]),Object(a["g"])("td",null,Object(a["B"])(e.formatNumber(t.totalOre)),1),Object(a["g"])("td",null,Object(a["B"])(e.formatNumber(t.totalMarketValue)),1)])})),128))])])])],64)}var De=function e(t,n){Object($["a"])(this,e),this.shipName=t,this.data=JSON.stringify(n)},Ge=Object(a["j"])({name:"ShipPurchase",data:function(){var e;return{shipInventory:null!==(e=this.inventory)&&void 0!==e?e:new ae,shipName:"",showLoadDialog:!1,shipNameArray:[],shipToLoad:""}},props:{inventory:Object},methods:{formatNumber:function(e){return this.$stringHelper.formatNumber(e)},showLoadShipDialog:function(){var e=this;this.getShipNames().then((function(){e.shipNameArray.length>0?e.showLoadDialog=!0:alert("No saved ships!")}))},saveShip:function(){var e=this,t=this.$dbContext,n=this.shipInventory,a=new De(this.shipName,n);t.initDatabase().then((function(){var n=t.getStore("ShipLocalStores","readwrite");n&&t.saveObject(n,e.shipName,a)}),(function(e){console.error("failed to save ship - error in init database",e)}))},getShipNames:function(){var e=this,t=this.$dbContext;return new Promise((function(n,a){t.initDatabase().then((function(){var o=t.getStore("ShipLocalStores","readonly");if(o){var r=o.getAllKeys();r.onsuccess=function(t){e.shipNameArray=r.result.map((function(e){return e.toString()})),n(null)},r.onerror=function(e){console.error("error getting ship names",e),a()}}}),(function(e){console.error("failed to load ship - error in init database",e),a()}))}))},loadShip:function(e){var t=this,n=this.$dbContext;n.initDatabase().then((function(){var a=n.getStore("ShipLocalStores","readonly");a&&n.getStoredObjectByIndex(a,e).then((function(e){if(e){var n=JSON.parse(e.data);t.shipInventory.cash=n.cash,t.shipInventory.ores=n.ores,t.shipName=e.shipName,t.showLoadDialog=!1}}),(function(e){console.error("unable to load ship",e)}))}),(function(e){console.error("failed to load ship - error in init database",e)}))}}});Ge.render=Fe;var Pe=Ge,We={class:"container-fluid inventory-card"},Ze={class:"form-floating m-2"},ze=Object(a["g"])("label",{for:"floatingInput"},"Balance After Purchase",-1),Ye={class:"card m-2  mt-3 px-2"},He={class:"d-flex justify-content-between w-100"},Je=Object(a["g"])("span",null,"Total ore volume remaining: ",-1),Ke={class:"d-flex justify-content-between w-100"},Qe=Object(a["g"])("span",null,"Total ore stacks remaining: ",-1),qe={class:"d-flex justify-content-between w-100"},Xe=Object(a["g"])("span",null,"Total ore value remaining: ",-1),$e=Object(a["g"])("img",{src:V.a},null,-1),_e={class:"table-responsive"},et={class:"table table-sm  table-striped"},tt=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",null,"Name"),Object(a["g"])("th",null,"Stack Count"),Object(a["g"])("th",null,"Extra Volume"),Object(a["g"])("th",null,"Total Ore"),Object(a["g"])("th",null,[Object(a["h"])("Total "),Object(a["g"])("img",{src:V.a})])])],-1);function nt(e,t,n,o,r,l){return Object(a["s"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("div",We,[Object(a["g"])("div",Ze,[Object(a["G"])(Object(a["g"])("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compare.cash=t}),class:Object(a["o"])(["form-control",{"is-invalid":e.compare.cash<0,"is-valid":e.compare.cash>0}]),id:"floatingInput",disabled:""},null,2),[[a["E"],e.compare.cash]]),ze]),Object(a["g"])("div",Ye,[Object(a["g"])("p",He,[Je,Object(a["g"])("span",null,Object(a["B"])(e.numberToKvString(e.compare.totalOreVolume)),1)]),Object(a["g"])("p",Ke,[Qe,Object(a["g"])("span",null,Object(a["B"])(e.formatNumber(e.compare.totalOreStacks)),1)]),Object(a["g"])("p",qe,[Xe,Object(a["g"])("span",null,[Object(a["h"])(Object(a["B"])(e.formatNumber(e.compare.totalOreValue)),1),$e])])])]),Object(a["g"])("div",_e,[Object(a["g"])("table",et,[tt,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["f"])(a["a"],null,Object(a["y"])(e.compare.oreArray,(function(t){return Object(a["s"])(),Object(a["f"])("tr",{key:t,class:Object(a["o"])({"text-danger":t.totalOre<0,"text-success":t.totalOre>0})},[Object(a["g"])("td",null,Object(a["B"])(t.name),1),Object(a["g"])("td",null,Object(a["B"])(t.fullStackCount),1),Object(a["g"])("td",null,Object(a["B"])(e.formatNumber(t.nonFullStackTotalVolume)),1),Object(a["g"])("td",null,Object(a["B"])(e.formatNumber(t.totalOre)),1),Object(a["g"])("td",null,Object(a["B"])(e.formatNumber(t.totalMarketValue)),1)],2)})),128))])])])],64)}var at=Object(a["j"])({name:"InventoryCompare",data:function(){return{compare:new re(this.inventoryA,this.inventoryB)}},props:{inventoryA:Object,inventoryB:Object},methods:{formatNumber:function(e){return this.$stringHelper.formatNumber(e)},numberToKvString:function(e){return this.$stringHelper.numberToKvString(e)}}});at.render=nt;var ot=at,rt={class:"market"},lt={class:"d-flex flex-wrap"},ct=["onUpdate:modelValue","onChange"];function it(e,t,n,o,r,l){return Object(a["s"])(),Object(a["f"])("div",rt,[Object(a["g"])("div",lt,[(Object(a["s"])(!0),Object(a["f"])(a["a"],null,Object(a["y"])(e.oreTable,(function(t){return Object(a["s"])(),Object(a["f"])("div",{class:"m-1",key:t},[Object(a["g"])("label",null,Object(a["B"])(t.name),1),Object(a["G"])(Object(a["g"])("input",{class:"form-control form-control-sm","onUpdate:modelValue":function(e){return t.marketValue=e},onChange:function(n){return e.update(t)}},null,40,ct),[[a["E"],t.marketValue,void 0,{number:!0}]])])})),128))])])}var ut=Object(a["j"])({name:"Market",data:function(){return{oreTable:ne.ores}},methods:{update:function(e){var t=ne.ores.find((function(t){return t.name===e.name}));t&&(t.marketValue=e.marketValue,console.log(ne)),this.$emit("updateOres",!0)}},emits:{updateOres:Object}});ut.render=it;var st=ut,bt=Object(a["j"])({name:"Home",components:{OreTable:ie,ShipPurchase:Pe,InventoryCompare:ot,MarketComponent:st},data:function(){return{playerInventory:new ae,shipInventory:new ae,differenceInventory:new ae,market:ne}},methods:{updateOreValues:function(){this.playerInventory.updateOres(),this.shipInventory.updateOres()}}});n("3054");bt.render=w,bt.__scopeId="data-v-1092a1f2";var dt=bt,Ot=[{path:"/",name:"Home",component:dt},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],ft=Object(c["a"])({history:Object(c["b"])(),routes:Ot}),mt=ft,jt=(n("7b17"),function e(t,n,a,o){Object($["a"])(this,e),this.storeName=t,this.indexes=a,this.keyPath=n,this.autoIncrement=o}),ht=function e(t,n){Object($["a"])(this,e),this.name=t,this.isUnique=n},gt=function(){function e(){Object($["a"])(this,e),this.dbName="sb-inv-db",this.version=2,this.db=null,this.dbStores=[new jt("ShipLocalStores","shipName",[new ht("shipName",!0)],!1),new jt("PlayerInventory","id",[],!0)]}return Object(_["a"])(e,[{key:"initDatabase",value:function(){var e=this;return new Promise((function(t,n){var a=indexedDB.open(e.dbName,e.version);a.onerror=function(e){n(e)},a.onupgradeneeded=function(a){e.addStores(a).then((function(){console.log("finished adding stores"),t(null)}),(function(e){console.error("error adding stores",e),n(e)}))},a.onsuccess=function(n){e.db=a.result,console.log("opened db successfully",e.db),t(null)}}))}},{key:"addStores",value:function(e){var t=this;return new Promise((function(n,a){e&&function(){var o;t.db=e.target.result;var r=[],l=null===(o=t.db)||void 0===o?void 0:o.objectStoreNames;if(t.db){var c,i=Object(Q["a"])(t.dbStores);try{var u=function(){var e=c.value;r.push(new Promise((function(n,a){if(l.contains(e.storeName))n(null);else if(console.log("creating store with name",e.storeName),e.autoIncrement){var o;null===(o=t.db)||void 0===o||o.createObjectStore(e.storeName,{autoIncrement:!0})}else{var r,c,i=null===(r=t.db)||void 0===r?void 0:r.createObjectStore(e.storeName,{keyPath:e.keyPath}),u=Object(Q["a"])(e.indexes);try{for(u.s();!(c=u.n()).done;){var s=c.value;null===i||void 0===i||i.createIndex(s.name,s.name,{unique:s.isUnique})}}catch(b){u.e(b)}finally{u.f()}}})))};for(i.s();!(c=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}Promise.all(r).then((function(){n(null)}),(function(e){a(e)}))}else a("db is null or undefined")}()}))}},{key:"getStore",value:function(e,t){var n,a=null===(n=this.db)||void 0===n?void 0:n.transaction(e,t);return null===a||void 0===a?void 0:a.objectStore(e)}},{key:"getStoredObjectByIndex",value:function(e,t){return new Promise((function(n,a){console.log(e);var o=e.get(t);o.onerror=function(e){console.error(e),a(e)},o.onsuccess=function(e){console.log(o),console.log(o.result),o.result?n(o.result):n(null)}}))}},{key:"saveObject",value:function(e,t,n){var a=this;return new Promise((function(o,r){a.getStoredObjectByIndex(e,t).then((function(a){var l=void 0;a?l=e.put(n):(console.log("adding by index: "+t,n),l=e.add(n)),l?(l.onsuccess=function(e){o(null)},l.onerror=function(e){r(e)}):r("failed getting result on save")}))}))}}]),e}(),vt=function e(){Object($["a"])(this,e),this.formatNumber=function(e){var t,n=null!==(t=Number(e))&&void 0!==t?t:0;return n?Number(e.toFixed(0)):0},this.numberToKvString=function(e){var t,n=null!==(t=Number(e))&&void 0!==t?t:0;return n/=1e3,"".concat(n," kv")}},pt=Object(a["c"])(l),yt=new gt;yt.initDatabase(),pt.config.globalProperties.$dbContext=yt,pt.config.globalProperties.$stringHelper=new vt,pt.use(mt).mount("#app")},f7bc:function(e,t,n){}});
//# sourceMappingURL=app.881c84ca.js.map