(function(e){function t(t){for(var o,l,c=t[0],i=t[1],u=t[2],s=0,d=[];s<c.length;s++)l=c[s],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&d.push(a[l][0]),a[l]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);b&&b(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,l=1;l<n.length;l++){var i=n[l];0!==a[i]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},r=[];function l(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"31293421"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=a[e]=[t,o]}));t.push(n[2]=o);var r,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=l(e);var u=new Error;r=function(t){i.onerror=i.onload=null,clearTimeout(s);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",u.name="ChunkLoadError",u.type=o,u.request=r,n[1](u)}a[e]=void 0}};var s=setTimeout((function(){r({type:"timeout",target:i})}),12e4);i.onerror=i.onload=r,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/starbase-inventory-manager/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var b=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},3302:function(e,t,n){},"5f56":function(e,t,n){},6500:function(e,t,n){"use strict";n("3302")},"8b8a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAACTFBMVEUhIRgPDgsAAAAICAb//8n///8LCggEBAP///j//+g2NBy3sIcDAgKFgGNoZE1ZVkMJCAULCgULCwUsKxsuLR0xMRw4Nx8ICARAPyU4NygzNSQ3NygsLB4vLyITEw5jYkmjoXi2s4W1s4WlonlmYksAAAA3Nyh1dFSmoXhfW0Y3NyWMiVqgmnNYVEEwLhaHg06alW9RTj0wLheFgUyVj2tLSDgxLxeDf0qPimdCQDIyLxiBfUiKhWQ9Oi8yMBl/e0Z2c0k6OiJ7eUlva0kAAAAzMBl9eER2dEkiIRZBQCVrZjgAAAAzMRp6dkJ0cUYrKhwQEAlEQydpZDY0MRp4dD9xb0QrKhwYGA5IRyloZDU0Mht2cj1vbUIsKx0dHRFNTCtcWC81Mxt0cDtta0AsKx4oJxY0MhsREAg5NyFzcDxvbUFLSDNSTjhRTjhRTjg9OyorKh8iIxljZUJ8eEZ7eEZ7d0Z9e0toaEglJRwaGhNgYUB4eEN8e0dlZUccHBYXFxFbXT10dEB4d0VgYEMZGRMsLRpTVCtOTRxLShhLShlPTh1WVS4uLhy/u4XRzJHNyI/HwobIw4fFwIfAvH/BvIDBvYC/uoG5tXi6tnm5tHyzr3GxrnGZlmCtqW60sHKzrnesqWurqGt8ek15d0mppmmtqmyuqXOmomSkoWOno2Wnom2gnF2fnF58eUifnF2cmFqZlld9e0eVklOSj1B6eEOMiUmLiEqFgkN+fD17ekJ2dDV2dDZ7eEFxbzBwbi9wbi5qaClpZidraCr///++0qbIAAAAjXRSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAu1f77+/VwAkzl6lVi+eRKMu/cPjLv1DQy78oqMu+/ITLv8sL7oAUy7+xDpMEKMu/tLxezwDLv7TAhv8Ey7+0wKs7CMu/tMDSSCzzy9HtbXVxxIBeu/v7+/a4XEaH+/qERDpT9/ZQPhvb9/f3994ehyR8wAAAAAWJLR0QF+G/pxwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+UGFwsgNHC2heEAAAEKSURBVBjTY2CQk1dQVFJWUWVkggIGZhY19d6+fg1NVjaYEBM7h5b2hImTdHQ52WFCTFx6+pOnTJ1mYMjNAxcyMp4+Y/qMmSamvHAhM/NZs+fMnTffwpIPJmRlvWDhosVLli6zseWHCtnZL1/u4Oi0YuUqZxcBiJCr2+o17h6ea9et9/IWhAj5+G7Y4OcfELhxU5C3EEQoOGTz5tAw4fCILZEwVVHRW7fFxIqIxsUnwIQSk7ZvT04RYRJLTUsXBwtJZGTu2JGVnZObm5dfIAkSkios2rlr957ikpKS0rLyCmkmBpnKquq9+/btB4O9NbV1sgz1DY0HDsLBoabmFobWtvaOTjjo6OruAQCwImNLAIRPhwAAAFR0RVh0Y29tbWVudABGaWxlIHNvdXJjZTogaHR0cHM6Ly93aWtpLnN0YXJiYXNlZ2FtZS5jb20vaW5kZXgucGhwL0ZpbGU6U0JfY3JlZGl0X2ljb24ucG5nNVRNjgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wNi0yM1QxMTozMjo1MiswMzowMGvYE3gAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDYtMjNUMTE6MzI6NTIrMDM6MDAahavEAAAAQ3RFWHRzb2Z0d2FyZQBmaWxlOi8vL3Vzci9zaGFyZS9kb2MvaW1hZ2VtYWdpY2stNi1jb21tb24vaHRtbC9pbmRleC5odG1sD9flOAAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABh0RVh0VGh1bWI6OkltYWdlOjpIZWlnaHQAMTIz1K6YCAAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAAxMjWuPG1gAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE2MjQ0MzcxNzJVDsGuAAAAE3RFWHRUaHVtYjo6U2l6ZQAyMS41S0JCXwfzswAAAABJRU5ErkJggg=="},"97a5":function(e,t,n){"use strict";n("5f56")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function a(e,t){var n=Object(o["z"])("router-view");return Object(o["s"])(),Object(o["d"])(n)}n("6500");const r={};r.render=a;var l=r,c=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02"));Object(o["v"])("data-v-e41a47fe");var i={class:"home container-fluid"},u={class:"d-flex flex-wrap"},s={class:"col-12 col-md-6 col-lg-4"},b={class:"card  me-2",id:"pi-card"},d=Object(o["g"])("div",{class:"card-header"}," Player Inventory ",-1),O={class:"col-12 col-md-6 col-lg-4"},f={class:"card me-2",id:"s-card"},m=Object(o["g"])("div",{class:"card-header"}," Ship ",-1),j={class:"col-12 col-md-12 col-lg-4"},h={class:"card me-2",id:"c-card"},g=Object(o["g"])("div",{class:"card-header"}," Remaining ",-1),v=Object(o["g"])("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[Object(o["g"])("li",{class:"nav-item",role:"presentation"},[Object(o["g"])("button",{class:"nav-link active",id:"market-tab","data-bs-toggle":"tab","data-bs-target":"#market",type:"button",role:"tab","aria-controls":"market","aria-selected":"true"},"Edit Market Values")])],-1),p={class:"tab-content",id:"myTabContent"},y={class:"tab-pane fade show active",id:"market",role:"tabpanel","aria-labelledby":"market-tab"},A={class:"container-fluid"},k={class:"col-12"};function w(e,t,n,a,r,l){var c=Object(o["z"])("OreTable"),w=Object(o["z"])("ShipPurchase"),S=Object(o["z"])("InventoryCompare"),V=Object(o["z"])("MarketComponent");return Object(o["s"])(),Object(o["f"])("div",i,[Object(o["g"])("p",null,"Prices last updated: "+Object(o["B"])(e.market.lastUpdate),1),Object(o["g"])("div",u,[Object(o["g"])("div",s,[Object(o["g"])("div",b,[d,Object(o["i"])(c,{inventory:e.playerInventory},null,8,["inventory"])])]),Object(o["g"])("div",O,[Object(o["g"])("div",f,[m,Object(o["i"])(w,{inventory:e.shipInventory},null,8,["inventory"])])]),Object(o["g"])("div",j,[Object(o["g"])("div",h,[g,Object(o["i"])(S,{inventoryA:e.playerInventory,inventoryB:e.shipInventory},null,8,["inventoryA","inventoryB"])])])]),v,Object(o["g"])("div",p,[Object(o["g"])("div",y,[Object(o["g"])("div",A,[Object(o["g"])("div",k,[Object(o["i"])(V,{class:"p-2",onUpdateOres:t[0]||(t[0]=function(t){return e.updateOreValues()})})])])])])])}Object(o["t"])();n("b0c0");var S=n("8b8a"),V=n.n(S),I={class:"container-fluid"},N={class:"form-floating m-2"},x=Object(o["g"])("label",{for:"floatingInput"},"Player Cash Balance",-1),B={class:"row m-2 mt-3"},T={class:"card "},C={class:"d-flex justify-content-between w-100"},M=Object(o["g"])("span",null,"Inventory total ore: ",-1),U={class:"d-flex justify-content-between w-100"},E=Object(o["g"])("span",null,"Inventory total ore stacks: ",-1),L={class:"d-flex justify-content-between w-100"},R=Object(o["g"])("span",null,"Inventory total value:",-1),F=Object(o["g"])("img",{src:V.a},null,-1),D={class:"row m-1"},G={class:"col-12 d-flex align-items-center justify-content-end"},P={class:"btn-group mt-2"},W={class:"table-responsive"},Z={class:"table table-sm table-striped w-100"},z=Object(o["g"])("thead",null,[Object(o["g"])("tr",null,[Object(o["g"])("th",null,"Name"),Object(o["g"])("th",null,"Value"),Object(o["g"])("th",null,"Stacks"),Object(o["g"])("th",null,"Extra Volume"),Object(o["g"])("th",null,"Total Ore"),Object(o["g"])("th",null,[Object(o["h"])("Total "),Object(o["g"])("img",{src:V.a})])])],-1),Y={width:"15%"},H=["onUpdate:modelValue"],J=["onUpdate:modelValue"];function K(e,t,n,a,r,l){return Object(o["s"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",I,[Object(o["g"])("div",N,[Object(o["G"])(Object(o["g"])("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.playerInventory.cash=t}),class:"form-control",id:"floatingInput"},null,512),[[o["E"],e.playerInventory.cash]]),x]),Object(o["g"])("div",B,[Object(o["g"])("div",T,[Object(o["g"])("p",C,[M,Object(o["g"])("span",null,Object(o["B"])(e.formatNumber(e.playerInventory.totalOreVolume)),1)]),Object(o["g"])("p",U,[E,Object(o["g"])("span",null,Object(o["B"])(e.formatNumber(e.playerInventory.totalOreStacks)),1)]),Object(o["g"])("p",L,[R,Object(o["g"])("span",null,[Object(o["h"])(Object(o["B"])(e.formatNumber(e.playerInventory.totalOreValue))+" ",1),F])])])]),Object(o["g"])("div",D,[Object(o["g"])("div",G,[Object(o["g"])("div",P,[Object(o["g"])("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=function(t){return e.savePlayerInventory()})},"Save"),Object(o["g"])("button",{class:"btn btn-secondary",onClick:t[2]||(t[2]=function(t){return e.getPlayerInventory()})},"Load Inventory Data")])])])]),Object(o["g"])("div",W,[Object(o["g"])("table",Z,[z,Object(o["g"])("tbody",null,[(Object(o["s"])(!0),Object(o["f"])(o["a"],null,Object(o["y"])(e.playerInventory.ores,(function(t){return Object(o["s"])(),Object(o["f"])("tr",{class:"align-middle",key:t},[Object(o["g"])("td",null,Object(o["B"])(t.name),1),Object(o["g"])("td",null,Object(o["B"])(t.marketValue),1),Object(o["g"])("td",Y,[Object(o["G"])(Object(o["g"])("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":function(e){return t.fullStackCount=e}},null,8,H),[[o["E"],t.fullStackCount]])]),Object(o["g"])("td",null,[Object(o["G"])(Object(o["g"])("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":function(e){return t.nonFullStackTotalVolume=e}},null,8,J),[[o["E"],t.nonFullStackTotalVolume]])]),Object(o["g"])("td",null,Object(o["B"])(e.formatNumber(t.totalOre)),1),Object(o["g"])("td",null,Object(o["B"])(e.formatNumber(t.totalMarketValue)),1)])})),128))])])])],64)}var Q=n("b85c"),q=(n("7db0"),n("262e")),X=n("2caf"),$=n("d4ec"),_=n("bee2"),ee=(n("d81d"),n("159b"),n("a9e3"),n("b680"),n("25f0"),n("ac1f"),n("1276"),function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object($["a"])(this,e),this.stackSize=1728e3,this.name=t,this.marketValue=n}),te=function e(t,n){Object($["a"])(this,e),this.oreArray=t,this.date=n},ne=function e(){Object($["a"])(this,e)};ne.lastUpdate=new Date(2021,7,26),ne.ores=[new ee("Aegisium",6440),new ee("Ajatite",549),new ee("Arkanium",12780),new ee("Bastium",2050),new ee("Charodium",4449),new ee("Corazium",21649),new ee("Exorium",4644),new ee("Ice",817),new ee("Karnite",9900),new ee("Kutonium",18935),new ee("Lukium",20500),new ee("Nhurgite",3099),new ee("Surtrite",4090),new ee("Valkite",545),new ee("Vokarium",2040),new ee("Ymrium",28399)],ne.oreHistory=[new te([new ee("Aegisium",7750),new ee("Ajatite",548),new ee("Arkanium",12895),new ee("Bastium",2495),new ee("Charodium",4398),new ee("Corazium",28895),new ee("Exorium",7089),new ee("Ice",817),new ee("Karnite",4749),new ee("Kutonium",22950),new ee("Lukium",24e3),new ee("Nhurgite",3340),new ee("Surtrite",3850),new ee("Valkite",543),new ee("Vokarium",2100),new ee("Ymrium",31270)],new Date(2021,7,23))];var oe=function(){function e(){Object($["a"])(this,e),this.tick=0,this.createdDate=new Date(Date.now()),this.ores=ne.ores.map((function(e){return new ae(e.name,e.marketValue)})),this.cash=0,this.updateOres()}return Object(_["a"])(e,[{key:"updateOres",value:function(){this.ores.forEach((function(e){var t=ne.ores.find((function(t){return t.name===e.name}));t&&(e.marketValue=t.marketValue)}))}},{key:"totalOreVolume",get:function(){return this.getTotalOreVolume()}},{key:"getTotalOreVolume",value:function(){var e=this.sum(this.ores.map((function(e){if(e.totalOre&&e.totalOre>0)return e.totalOre;var t,n,o=e.fullStackCount*e.stackSize+e.nonFullStackTotalVolume,a=null!==(t=Number(o))&&void 0!==t?t:0;return Number(null!==(n=a.toFixed(0))&&void 0!==n?n:0)})));return e}},{key:"totalOreValue",get:function(){return this.getTotalOreValue()}},{key:"getTotalOreValue",value:function(){return this.sum(this.ores.map((function(e){if(e.totalMarketValue&&e.totalMarketValue>0)return e.totalMarketValue;var t,n,o=e.fullStackCount*e.stackSize+e.nonFullStackTotalVolume,a=o/e.stackSize*e.marketValue,r=null!==(t=Number(a))&&void 0!==t?t:0;return Number(null!==(n=r.toFixed(0))&&void 0!==n?n:0)})))}},{key:"totalOreStacks",get:function(){var e=this.totalOreVolume/this.ores[0].stackSize;return null!==e&&void 0!==e?e:0}},{key:"sum",value:function(e){return e.reduce((function(e,t){return e+t}))}}]),e}(),ae=function(e){Object(q["a"])(n,e);var t=Object(X["a"])(n);function n(e){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object($["a"])(this,n),o=t.call(this,e,a),o.fullStackCount=0,o.nonFullStackTotalVolume=0,o._totalOre=0,o}return Object(_["a"])(n,[{key:"totalOre",get:function(){return this.getTotalOre()}},{key:"getTotalOre",value:function(){return this._totalOre=this.fullStackCount*this.stackSize+this.nonFullStackTotalVolume,this._totalOre}},{key:"totalMarketValue",get:function(){return this.getTotalMarketValue()}},{key:"getTotalMarketValue",value:function(){return this.totalOre/this.stackSize*this.marketValue}}]),n}(ee),re=function(){function e(t,n){Object($["a"])(this,e),this.inventoryA=t,this.inventoryB=n}return Object(_["a"])(e,[{key:"totalOreValue",get:function(){return this.inventoryA.totalOreValue-this.inventoryB.totalOreValue}},{key:"totalOreVolume",get:function(){return this.inventoryA.totalOreVolume-this.inventoryB.totalOreVolume}},{key:"totalOreStacks",get:function(){return this.inventoryA.totalOreStacks-this.inventoryB.totalOreStacks}},{key:"oreArray",get:function(){var e=this;return this.inventoryA.ores.map((function(t,n){var o=new ae(t.name,t.marketValue),a=e.inventoryB.ores[n],r=t.totalOre-a.totalOre,l=(r/t.stackSize).toString(),c=l.split(".");return o.fullStackCount=Number(c[0]),o.nonFullStackTotalVolume=c[1]?Number("0.".concat(c[1]))*t.stackSize:0,o}))}},{key:"cash",get:function(){return this.inventoryA.cash-this.inventoryB.cash}}]),e}(),le=function e(t){Object($["a"])(this,e),this.data=JSON.stringify(t)},ce=Object(o["j"])({name:"OreTable",data:function(){var e;return{playerInventory:null!==(e=this.inventory)&&void 0!==e?e:new oe}},props:{inventory:Object},methods:{formatNumber:function(e){return this.$stringHelper.formatNumber(e)},getPlayerInventory:function(){var e=this,t=this.$dbContext,n=t.getStore("PlayerInventory","readonly");if(n){var o=n.count(void 0);o.onsuccess=function(o){var a=1;t.getStoredObjectByIndex(n,a).then((function(t){if(t){var n,o,a=JSON.parse(t.data),r=Object(Q["a"])(e.playerInventory.ores);try{var l=function(){var e,t,n=o.value,r=a.ores.find((function(e){return e.name===n.name}));n.fullStackCount=null!==(e=null===r||void 0===r?void 0:r.fullStackCount)&&void 0!==e?e:n.fullStackCount,n.nonFullStackTotalVolume=null!==(t=null===r||void 0===r?void 0:r.nonFullStackTotalVolume)&&void 0!==t?t:n.nonFullStackTotalVolume};for(r.s();!(o=r.n()).done;)l()}catch(c){r.e(c)}finally{r.f()}e.playerInventory.cash=null!==(n=null===a||void 0===a?void 0:a.cash)&&void 0!==n?n:e.playerInventory.cash}}))},o.onerror=function(e){console.error("count error",e)}}else console.error("unable to get store")},savePlayerInventory:function(){var e=this,t=this.$dbContext,n=t.getStore("PlayerInventory","readwrite");if(n){var o=n.count();o.onsuccess=function(t){var a=new le(e.playerInventory);if(0===o.result){var r=n.add(a);r.onsuccess=function(e){console.log("saved player inventory!")},r.onerror=function(e){console.error("error saving player inventory",e)}}else n.put(a,1)}}else console.error("unable to get store")}}});ce.render=K;var ie=ce,ue={class:"container-fluid"},se={class:"form-floating m-2"},be=Object(o["g"])("label",{for:"floatingInput"},"Ship Price",-1),de={key:0,class:"container-fluid"},Oe={class:"row"},fe={class:"col-6"},me={class:"form-floating m-2"},je=Object(o["g"])("label",{for:"floatingInput"},"Ship Name",-1),he={class:"col-6 d-flex align-items-center justify-content-center"},ge={class:"btn-group"},ve={class:"container-fluid"},pe={key:0,class:"d-flex w-100"},ye=Object(o["g"])("option",{disabled:"",value:""},"Please select one",-1),Ae={class:"container-fluid"},ke={class:"card m-2 px-2"},we={class:"d-flex justify-content-between w-100"},Se=Object(o["g"])("span",null,"Ship total ore cost: ",-1),Ve={class:"d-flex justify-content-between w-100"},Ie=Object(o["g"])("span",null,"Ship total ore stacks:",-1),Ne={class:"d-flex justify-content-between w-100"},xe=Object(o["g"])("span",null,"Ship total ore value: ",-1),Be=Object(o["g"])("img",{src:V.a},null,-1),Te={class:"table-responsive"},Ce={class:"table table-sm table-striped w-100"},Me=Object(o["g"])("thead",null,[Object(o["g"])("tr",null,[Object(o["g"])("th",null,"Name"),Object(o["g"])("th",null,"Stacks"),Object(o["g"])("th",null,"Extra Volume"),Object(o["g"])("th",null,"Total Ore"),Object(o["g"])("th",null,[Object(o["h"])("Total "),Object(o["g"])("img",{src:V.a})])])],-1),Ue={width:"15%"},Ee=["onUpdate:modelValue"],Le=["onUpdate:modelValue"];function Re(e,t,n,a,r,l){return Object(o["s"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",ue,[Object(o["g"])("div",se,[Object(o["G"])(Object(o["g"])("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.shipInventory.cash=t}),class:"form-control",id:"floatingInput"},null,512),[[o["E"],e.shipInventory.cash]]),be])]),e.showLoadDialog?Object(o["e"])("",!0):(Object(o["s"])(),Object(o["f"])("div",de,[Object(o["g"])("div",Oe,[Object(o["g"])("div",fe,[Object(o["g"])("div",me,[Object(o["G"])(Object(o["g"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.shipName=t}),class:"form-control",id:"floatingInput"},null,512),[[o["E"],e.shipName]]),je])]),Object(o["g"])("div",he,[Object(o["g"])("div",ge,[Object(o["g"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.saveShip()})},"Save Ship"),Object(o["g"])("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=function(t){return e.showLoadShipDialog()})},"Load Ship")])])])])),Object(o["g"])("div",ve,[e.showLoadDialog?(Object(o["s"])(),Object(o["f"])("div",pe,[Object(o["G"])(Object(o["g"])("select",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.shipToLoad=t}),class:"form-select m-2",onChange:t[5]||(t[5]=function(t){return e.loadShip(e.shipToLoad)})},[ye,(Object(o["s"])(!0),Object(o["f"])(o["a"],null,Object(o["y"])(e.shipNameArray,(function(e){return Object(o["s"])(),Object(o["f"])("option",{key:e},Object(o["B"])(e),1)})),128))],544),[[o["D"],e.shipToLoad]])])):Object(o["e"])("",!0)]),Object(o["g"])("div",Ae,[Object(o["g"])("div",ke,[Object(o["g"])("p",we,[Se,Object(o["g"])("span",null,Object(o["B"])(e.formatNumber(e.shipInventory.totalOreVolume)),1)]),Object(o["g"])("p",Ve,[Ie,Object(o["g"])("span",null,Object(o["B"])(e.formatNumber(e.shipInventory.totalOreStacks)),1)]),Object(o["g"])("p",Ne,[xe,Object(o["g"])("span",null,[Object(o["h"])(Object(o["B"])(e.formatNumber(e.shipInventory.totalOreValue)),1),Be])])])]),Object(o["g"])("div",Te,[Object(o["g"])("table",Ce,[Me,Object(o["g"])("tbody",null,[(Object(o["s"])(!0),Object(o["f"])(o["a"],null,Object(o["y"])(e.shipInventory.ores,(function(t){return Object(o["s"])(),Object(o["f"])("tr",{key:t},[Object(o["g"])("td",null,Object(o["B"])(t.name),1),Object(o["g"])("td",Ue,[Object(o["G"])(Object(o["g"])("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":function(e){return t.fullStackCount=e}},null,8,Ee),[[o["E"],t.fullStackCount]])]),Object(o["g"])("td",null,[Object(o["G"])(Object(o["g"])("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":function(e){return t.nonFullStackTotalVolume=e}},null,8,Le),[[o["E"],t.nonFullStackTotalVolume]])]),Object(o["g"])("td",null,Object(o["B"])(e.formatNumber(t.totalOre)),1),Object(o["g"])("td",null,Object(o["B"])(e.formatNumber(t.totalMarketValue)),1)])})),128))])])])],64)}var Fe=function e(t,n){Object($["a"])(this,e),this.shipName=t,this.data=JSON.stringify(n)},De=Object(o["j"])({name:"ShipPurchase",data:function(){var e;return{shipInventory:null!==(e=this.inventory)&&void 0!==e?e:new oe,shipName:"",showLoadDialog:!1,shipNameArray:[],shipToLoad:""}},props:{inventory:Object},methods:{formatNumber:function(e){return this.$stringHelper.formatNumber(e)},showLoadShipDialog:function(){var e=this;this.getShipNames().then((function(){e.shipNameArray.length>0?e.showLoadDialog=!0:alert("No saved ships!")}))},saveShip:function(){var e=this,t=this.$dbContext,n=this.shipInventory,o=new Fe(this.shipName,n);t.initDatabase().then((function(){var n=t.getStore("ShipLocalStores","readwrite");n&&t.saveObject(n,e.shipName,o)}),(function(e){console.error("failed to save ship - error in init database",e)}))},getShipNames:function(){var e=this,t=this.$dbContext;return new Promise((function(n,o){t.initDatabase().then((function(){var a=t.getStore("ShipLocalStores","readonly");if(a){var r=a.getAllKeys();r.onsuccess=function(t){e.shipNameArray=r.result.map((function(e){return e.toString()})),n(null)},r.onerror=function(e){console.error("error getting ship names",e),o()}}}),(function(e){console.error("failed to load ship - error in init database",e),o()}))}))},loadShip:function(e){var t=this,n=this.$dbContext;n.initDatabase().then((function(){var o=n.getStore("ShipLocalStores","readonly");o&&n.getStoredObjectByIndex(o,e).then((function(e){if(e){var n=JSON.parse(e.data);t.shipInventory.cash=n.cash,t.shipInventory.ores=n.ores,t.shipName=e.shipName,t.showLoadDialog=!1}}),(function(e){console.error("unable to load ship",e)}))}),(function(e){console.error("failed to load ship - error in init database",e)}))}}});De.render=Re;var Ge=De,Pe={class:"container-fluid"},We={class:"form-floating m-2"},Ze=Object(o["g"])("label",{for:"floatingInput"},"Balance After Purchase",-1),ze={class:"card m-2  mt-3 px-2"},Ye={class:"d-flex justify-content-between w-100"},He=Object(o["g"])("span",null,"Total ore volume remaining: ",-1),Je={class:"d-flex justify-content-between w-100"},Ke=Object(o["g"])("span",null,"Total ore stacks remaining: ",-1),Qe={class:"d-flex justify-content-between w-100"},qe=Object(o["g"])("span",null,"Total ore value remaining: ",-1),Xe=Object(o["g"])("img",{src:V.a},null,-1),$e={class:"table-responsive"},_e={class:"table table-sm  table-striped"},et=Object(o["g"])("thead",null,[Object(o["g"])("tr",null,[Object(o["g"])("th",null,"Name"),Object(o["g"])("th",null,"Stack Count"),Object(o["g"])("th",null,"Extra Volume"),Object(o["g"])("th",null,"Total Ore"),Object(o["g"])("th",null,[Object(o["h"])("Total "),Object(o["g"])("img",{src:V.a})])])],-1);function tt(e,t,n,a,r,l){return Object(o["s"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",Pe,[Object(o["g"])("div",We,[Object(o["G"])(Object(o["g"])("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.compare.cash=t}),class:Object(o["o"])(["form-control",{"is-invalid":e.compare.cash<0,"is-valid":e.compare.cash>0}]),id:"floatingInput",disabled:""},null,2),[[o["E"],e.compare.cash]]),Ze]),Object(o["g"])("div",ze,[Object(o["g"])("p",Ye,[He,Object(o["g"])("span",null,Object(o["B"])(e.numberToKvString(e.compare.totalOreVolume)),1)]),Object(o["g"])("p",Je,[Ke,Object(o["g"])("span",null,Object(o["B"])(e.formatNumber(e.compare.totalOreStacks)),1)]),Object(o["g"])("p",Qe,[qe,Object(o["g"])("span",null,[Object(o["h"])(Object(o["B"])(e.formatNumber(e.compare.totalOreValue)),1),Xe])])])]),Object(o["g"])("div",$e,[Object(o["g"])("table",_e,[et,Object(o["g"])("tbody",null,[(Object(o["s"])(!0),Object(o["f"])(o["a"],null,Object(o["y"])(e.compare.oreArray,(function(t){return Object(o["s"])(),Object(o["f"])("tr",{key:t,class:Object(o["o"])({"text-danger":t.totalOre<0,"text-success":t.totalOre>0})},[Object(o["g"])("td",null,Object(o["B"])(t.name),1),Object(o["g"])("td",null,Object(o["B"])(t.fullStackCount),1),Object(o["g"])("td",null,Object(o["B"])(e.formatNumber(t.nonFullStackTotalVolume)),1),Object(o["g"])("td",null,Object(o["B"])(e.formatNumber(t.totalOre)),1),Object(o["g"])("td",null,Object(o["B"])(e.formatNumber(t.totalMarketValue)),1)],2)})),128))])])])],64)}var nt=Object(o["j"])({name:"InventoryCompare",data:function(){return{compare:new re(this.inventoryA,this.inventoryB)}},props:{inventoryA:Object,inventoryB:Object},methods:{formatNumber:function(e){return this.$stringHelper.formatNumber(e)},numberToKvString:function(e){return this.$stringHelper.numberToKvString(e)}}});nt.render=tt;var ot=nt,at={class:"market"},rt={class:"d-flex flex-wrap"},lt=["onUpdate:modelValue","onChange"];function ct(e,t,n,a,r,l){return Object(o["s"])(),Object(o["f"])("div",at,[Object(o["g"])("div",rt,[(Object(o["s"])(!0),Object(o["f"])(o["a"],null,Object(o["y"])(e.oreTable,(function(t){return Object(o["s"])(),Object(o["f"])("div",{class:"m-1",key:t},[Object(o["g"])("label",null,Object(o["B"])(t.name),1),Object(o["G"])(Object(o["g"])("input",{class:"form-control form-control-sm","onUpdate:modelValue":function(e){return t.marketValue=e},onChange:function(n){return e.update(t)}},null,40,lt),[[o["E"],t.marketValue,void 0,{number:!0}]])])})),128))])])}var it=Object(o["j"])({name:"Market",data:function(){return{oreTable:ne.ores}},methods:{update:function(e){var t=ne.ores.find((function(t){return t.name===e.name}));t&&(t.marketValue=e.marketValue,console.log(ne)),this.$emit("updateOres",!0)}},emits:{updateOres:Object}});it.render=ct;var ut=it,st=Object(o["j"])({name:"Home",components:{OreTable:ie,ShipPurchase:Ge,InventoryCompare:ot,MarketComponent:ut},data:function(){return{playerInventory:new oe,shipInventory:new oe,differenceInventory:new oe,market:ne}},methods:{updateOreValues:function(){this.playerInventory.updateOres(),this.shipInventory.updateOres()}}});n("97a5");st.render=w,st.__scopeId="data-v-e41a47fe";var bt=st,dt=[{path:"/",name:"Home",component:bt},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Ot=Object(c["a"])({history:Object(c["b"])(),routes:dt}),ft=Ot,mt=(n("7b17"),function e(t,n,o,a){Object($["a"])(this,e),this.storeName=t,this.indexes=o,this.keyPath=n,this.autoIncrement=a}),jt=function e(t,n){Object($["a"])(this,e),this.name=t,this.isUnique=n},ht=function(){function e(){Object($["a"])(this,e),this.dbName="sb-inv-db",this.version=2,this.db=null,this.dbStores=[new mt("ShipLocalStores","shipName",[new jt("shipName",!0)],!1),new mt("PlayerInventory","id",[],!0)]}return Object(_["a"])(e,[{key:"initDatabase",value:function(){var e=this;return new Promise((function(t,n){var o=indexedDB.open(e.dbName,e.version);o.onerror=function(e){n(e)},o.onupgradeneeded=function(o){e.addStores(o).then((function(){console.log("finished adding stores"),t(null)}),(function(e){console.error("error adding stores",e),n(e)}))},o.onsuccess=function(n){e.db=o.result,console.log("opened db successfully",e.db),t(null)}}))}},{key:"addStores",value:function(e){var t=this;return new Promise((function(n,o){e&&function(){var a;t.db=e.target.result;var r=[],l=null===(a=t.db)||void 0===a?void 0:a.objectStoreNames;if(t.db){var c,i=Object(Q["a"])(t.dbStores);try{var u=function(){var e=c.value;r.push(new Promise((function(n,o){if(l.contains(e.storeName))n(null);else if(console.log("creating store with name",e.storeName),e.autoIncrement){var a;null===(a=t.db)||void 0===a||a.createObjectStore(e.storeName,{autoIncrement:!0})}else{var r,c,i=null===(r=t.db)||void 0===r?void 0:r.createObjectStore(e.storeName,{keyPath:e.keyPath}),u=Object(Q["a"])(e.indexes);try{for(u.s();!(c=u.n()).done;){var s=c.value;null===i||void 0===i||i.createIndex(s.name,s.name,{unique:s.isUnique})}}catch(b){u.e(b)}finally{u.f()}}})))};for(i.s();!(c=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}Promise.all(r).then((function(){n(null)}),(function(e){o(e)}))}else o("db is null or undefined")}()}))}},{key:"getStore",value:function(e,t){var n,o=null===(n=this.db)||void 0===n?void 0:n.transaction(e,t);return null===o||void 0===o?void 0:o.objectStore(e)}},{key:"getStoredObjectByIndex",value:function(e,t){return new Promise((function(n,o){console.log(e);var a=e.get(t);a.onerror=function(e){console.error(e),o(e)},a.onsuccess=function(e){console.log(a),console.log(a.result),a.result?n(a.result):n(null)}}))}},{key:"saveObject",value:function(e,t,n){var o=this;return new Promise((function(a,r){o.getStoredObjectByIndex(e,t).then((function(o){var l=void 0;o?l=e.put(n):(console.log("adding by index: "+t,n),l=e.add(n)),l?(l.onsuccess=function(e){a(null)},l.onerror=function(e){r(e)}):r("failed getting result on save")}))}))}}]),e}(),gt=function e(){Object($["a"])(this,e),this.formatNumber=function(e){var t,n=null!==(t=Number(e))&&void 0!==t?t:0;return n?Number(e.toFixed(0)):0},this.numberToKvString=function(e){var t,n=null!==(t=Number(e))&&void 0!==t?t:0;return n/=1e3,"".concat(n," kv")}},vt=Object(o["c"])(l),pt=new ht;pt.initDatabase(),vt.config.globalProperties.$dbContext=pt,vt.config.globalProperties.$stringHelper=new gt,vt.use(ft).mount("#app")}});
//# sourceMappingURL=app.04e82e07.js.map